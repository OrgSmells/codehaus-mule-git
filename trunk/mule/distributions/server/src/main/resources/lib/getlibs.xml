<!--
 Copyright (c) MuleSource, Inc.  All rights reserved.  http://www.mulesource.com

 The software in this package is published under the terms of the MuleSource MPL
 license, a copy of which has been included with this distribution in the
 LICENSE.txt file.

 Usage:
    ant -f getlibs.xml

 This script simply downloads a few common libraries used with Mule which cannot
 be included as part of the main distribution due to license incompatibility.

 The downloaded libraries will be placed in your $MULE_HOME/lib/user directory.
-->
<project name="Mule 3rd-Party Libraries Download" default="get.libraries">

    <property name="url.maven.repo" value="http://www.ibiblio.org/maven2"/>
    <property name="url.mule-deps.repo" value="http://dist.codehaus.org/mule/dependencies/maven2"/>

    <target name="get.libraries" depends="sanity.check">

    	<!-- Needed for E-mail -->
        <get src="${url.maven.repo}/javax/mail/mail/1.4/mail-1.4.jar"
             dest="${dir.user.lib}/mail.jar"
             verbose="true"
             usetimestamp="true"/>
        <get src="${url.maven.repo}/javax/activation/activation/1.1/activation-1.1.jar"
             dest="${dir.user.lib}/activation.jar"
             verbose="true"
             usetimestamp="true"/>

    	<!-- Needed for Scripting -->
        <get src="${url.mule-deps.repo}/script/jsr223/1.0/jsr223-1.0.jar"
             dest="${dir.user.lib}/jsr223.jar"
             verbose="true"
             usetimestamp="true"/>
    </target>

    <target name="sanity.check">
        <property environment="env"/>
        <property name="dir.mule.home" value="${env.MULE_HOME}"/>
        <property name="dir.user.lib" value="${dir.mule.home}/lib/user/"/>

        <fail message="MULE_HOME environment variable has not been set.">
            <condition>
                <or>
                    <equals arg1="${dir.mule.home}" arg2=""/>
                    <equals arg1="${dir.mule.home}" arg2="$${env.MULE_HOME}"/>
                </or>
            </condition>
        </fail>
    </target>
</project>

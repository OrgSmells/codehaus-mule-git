<!--
Assembly descriptor for the full Mule distribution.
-->
<assembly>
  <id>full</id>
  <formats>
    <format>zip</format>
    <format>tar.gz</format>
  </formats>

  <fileSets>
    <fileSet>
      <directory>../src/main/resources</directory>
      <outputDirectory></outputDirectory>
      <!-- <lineEnding>???</lineEnding> -->
    </fileSet>

    <!-- Make binary directories executable. -->
    <fileSet>
      <directory>../src/main/resources/bin</directory>
      <outputDirectory>bin</outputDirectory>
      <fileMode>744</fileMode>
    </fileSet>
    <fileSet>
      <directory>../src/main/resources/sbin</directory>
      <outputDirectory>sbin</outputDirectory>
      <fileMode>744</fileMode>
    </fileSet>



      <!--
        ============================
            Mule Examples: Echo
        ============================
      -->
    <fileSet>
          <directory>../../../examples/echo</directory>
          <outputDirectory>examples/echo</outputDirectory>
      <excludes>
              <exclude>.mule/**</exclude>
              <exclude>target/**</exclude>
              <!-- Will later re-map sources into a simpler non-m2 structure -->
              <exclude>src/**</exclude>
              <exclude>.project</exclude>
              <exclude>.classpath</exclude>
              <exclude>.settings</exclude>
              <exclude>*.iml</exclude>
              <exclude>pom.xml</exclude>
              <exclude>*.log</exclude>
      </excludes>
    </fileSet>


      <!--
        ==================================
            Mule Examples: Error Handler
        ==================================
      -->
      <fileSet>
          <directory>../../../examples/errorhandler</directory>
          <outputDirectory>examples/errorhandler</outputDirectory>
          <excludes>
              <exclude>.mule/**</exclude>
              <exclude>target/**</exclude>
              <!-- Will later re-map sources into a simpler non-m2 structure -->
              <exclude>src/**</exclude>
              <exclude>.project</exclude>
              <exclude>.classpath</exclude>
              <exclude>.settings</exclude>
              <exclude>*.iml</exclude>
              <exclude>pom.xml</exclude>
              <exclude>*.log</exclude>
          </excludes>
      </fileSet>

      <fileSet>
          <directory>../../../examples/errorhandler/src/main/java</directory>
          <outputDirectory>examples/errorhandler/src</outputDirectory>
      </fileSet>

      <!--
        ============================
            Mule Examples: Hello
        ============================
      -->
      <fileSet>
          <directory>../../../examples/hello</directory>
          <outputDirectory>examples/hello</outputDirectory>
          <excludes>
              <!-- Exclude here, add later with permissions set -->
              <exclude>bin/*.sh</exclude>
              <exclude>.mule/**</exclude>
              <exclude>target/**</exclude>
              <!-- Will later re-map sources into a simpler non-m2 structure -->
              <exclude>src/**</exclude>
              <exclude>.project</exclude>
              <exclude>.classpath</exclude>
              <exclude>.settings</exclude>
              <exclude>*.iml</exclude>
              <exclude>pom.xml</exclude>
              <exclude>*.log</exclude>
          </excludes>
      </fileSet>

      <fileSet>
          <directory>../../../examples/hello/bin</directory>
          <outputDirectory>examples/hello/bin</outputDirectory>
          <fileMode>744</fileMode>
          <includes>
              <include>*.sh</include>
          </includes>
      </fileSet>

      <fileSet>
          <directory>../../../examples/hello/src/main/java</directory>
          <outputDirectory>examples/hello/src</outputDirectory>
      </fileSet>


      <!--
        ===============================
            Mule Examples: Loan Broker
        ===============================
      -->
      <fileSet>
          <directory>../../../examples/loanbroker</directory>
          <outputDirectory>examples/loanbroker</outputDirectory>
          <excludes>
              <exclude>.mule/**</exclude>
              <exclude>target/**</exclude>
              <!-- Will later re-map sources into a simpler non-m2 structure -->
              <exclude>src/**</exclude>
              <exclude>.project</exclude>
              <exclude>.classpath</exclude>
              <exclude>.settings</exclude>
              <exclude>*.iml</exclude>
              <exclude>pom.xml</exclude>
              <exclude>*.log</exclude>
          </excludes>
      </fileSet>

      <fileSet>
          <directory>../../../examples/loanbroker/src/main/java</directory>
          <outputDirectory>examples/loanbroker/src</outputDirectory>
      </fileSet>


      <!--
        ===================================
            Mule Examples: Loan Broker ESB
        ===================================
      -->
      <fileSet>
          <directory>../../../examples/loanbroker-esb</directory>
          <outputDirectory>examples/loanbroker-esb</outputDirectory>
          <excludes>
              <exclude>.mule/**</exclude>
              <exclude>target/**</exclude>
              <!-- Will later re-map sources into a simpler non-m2 structure -->
              <exclude>credit-agency/**</exclude>
              <exclude>loanbroker/**</exclude>
              <exclude>.project</exclude>
              <exclude>.classpath</exclude>
              <exclude>.settings</exclude>
              <exclude>*.iml</exclude>
              <exclude>pom.xml</exclude>
              <exclude>*.log</exclude>
          </excludes>
      </fileSet>

      <fileSet>
          <directory>../../../examples/loanbroker-esb/loanbroker/src/main/java</directory>
          <outputDirectory>examples/loanbroker-esb/src/loanbroker</outputDirectory>
      </fileSet>

      <fileSet>
          <directory>../../../examples/loanbroker-esb/loanbroker/src/main/resources</directory>
          <outputDirectory>examples/loanbroker-esb/src/loanbroker</outputDirectory>
      </fileSet>

      <fileSet>
          <directory>../../../examples/loanbroker-esb/credit-agency/src/main/java</directory>
          <outputDirectory>examples/loanbroker-esb/src/credit-agency</outputDirectory>
      </fileSet>

      <fileSet>
          <directory>../../../examples/loanbroker-esb/credit-agency/src/main/resources</directory>
          <outputDirectory>examples/loanbroker-esb/src/credit-agency</outputDirectory>
      </fileSet>


      <!--
        =============================
            Mule Examples: Scripting
        =============================
      -->
      <fileSet>
          <directory>../../../examples/scripting</directory>
          <outputDirectory>examples/scripting</outputDirectory>
          <excludes>
              <exclude>.mule/**</exclude>
              <exclude>target/**</exclude>
              <!-- Will later re-map sources into a simpler non-m2 structure -->
              <exclude>src/**</exclude>
              <exclude>.project</exclude>
              <exclude>.classpath</exclude>
              <exclude>.settings</exclude>
              <exclude>*.iml</exclude>
              <exclude>pom.xml</exclude>
              <exclude>*.log</exclude>
          </excludes>
      </fileSet>

      <fileSet>
          <directory>../../../examples/scripting/src/main/java</directory>
          <outputDirectory>examples/scripting/src</outputDirectory>
      </fileSet>

      <fileSet>
          <directory>../../../examples/scripting/src/main/resources</directory>
          <outputDirectory>examples/scripting/src</outputDirectory>
      </fileSet>


      <!--
        ===============================
            Mule Examples: Stock Quote
        ===============================
      -->
      <fileSet>
          <directory>../../../examples/stockquote</directory>
          <outputDirectory>examples/stockquote</outputDirectory>
          <excludes>
              <exclude>.mule/**</exclude>
              <exclude>target/**</exclude>
              <!-- Will later re-map sources into a simpler non-m2 structure -->
              <exclude>src/**</exclude>
              <exclude>.project</exclude>
              <exclude>.classpath</exclude>
              <exclude>.settings</exclude>
              <exclude>*.iml</exclude>
              <exclude>pom.xml</exclude>
              <exclude>*.log</exclude>
          </excludes>
      </fileSet>

      <fileSet>
          <directory>../../../examples/stockquote/src/main/java</directory>
          <outputDirectory>examples/stockquote/src</outputDirectory>
      </fileSet>

      <fileSet>
          <directory>../../../examples/stockquote/src/main/resources</directory>
          <outputDirectory>examples/stockquote/src</outputDirectory>
      </fileSet>


      <!--
        ================================
            Mule Examples: VoIP Service
        ================================
      -->
      <fileSet>
          <directory>../../../examples/voipservice</directory>
          <outputDirectory>examples/voipservice</outputDirectory>
          <excludes>
              <exclude>.mule/**</exclude>
              <exclude>target/**</exclude>
              <!-- Will later re-map sources into a simpler non-m2 structure -->
              <exclude>src/**</exclude>
              <exclude>.project</exclude>
              <exclude>.classpath</exclude>
              <exclude>.settings</exclude>
              <exclude>*.iml</exclude>
              <exclude>pom.xml</exclude>
              <exclude>*.log</exclude>
          </excludes>
      </fileSet>

      <fileSet>
          <directory>../../../examples/voipservice/src/main/java</directory>
          <outputDirectory>examples/voipservice/src</outputDirectory>
      </fileSet>


      <!--
        ============================
            Mule Examples: Webapp
        ============================
      -->
      <fileSet>
          <directory>../../../examples/webapp</directory>
          <outputDirectory>examples/webapp</outputDirectory>
          <excludes>
              <exclude>.mule/**</exclude>
              <exclude>target/**</exclude>
              <!-- Will later re-map sources into a simpler non-m2 structure -->
              <exclude>src/**</exclude>
              <exclude>.project</exclude>
              <exclude>.classpath</exclude>
              <exclude>.settings</exclude>
              <exclude>*.iml</exclude>
              <exclude>pom.xml</exclude>
              <exclude>*.log</exclude>
          </excludes>
      </fileSet>

      <fileSet>
          <directory>../../../examples/webapp/src/main/java</directory>
          <outputDirectory>examples/webapp/src</outputDirectory>
      </fileSet>

      <fileSet>
          <directory>../../../examples/webapp/src/main/resources</directory>
          <outputDirectory>examples/webapp/src</outputDirectory>
      </fileSet>

      <fileSet>
          <directory>../../../examples/webapp/src/main/java</directory>
          <outputDirectory>examples/webapp/web</outputDirectory>
      </fileSet>

    <!-- Copy the USAGE.txt file to the root directory for visibility -->
    <fileSet>
      <directory>../src/main/resources/bin</directory>
      <outputDirectory></outputDirectory>
      <includes>
          <include>USAGE.txt</include>
      </includes>
    </fileSet>

    <!-- Copy javadocs -->
    <fileSet>
      <directory>../../../target/site/apidocs</directory>
      <outputDirectory>docs/api</outputDirectory>
    </fileSet>

    <!-- Copy source bundles ("mvn -DperformRelease=true" must have been run previously) -->
    <fileSet>
      <directory>../../..</directory>
      <outputDirectory>src</outputDirectory>
      <includes>
          <include>**/*-sources.jar</include>
      </includes>
    </fileSet>

    <!-- OpenEJB needs a direct path to the openejb.conf file (i.e., it can't find it from within a jar) -->
    <fileSet>
      <directory>../../../examples/loanbroker-esb/loanbroker/src/main/resources</directory>
      <outputDirectory>lib/user</outputDirectory>
      <includes>
          <include>openejb.conf</include>
      </includes>
    </fileSet>
  </fileSets>

  <!-- Once http://jira.codehaus.org/browse/MASSEMBLY-41 is fixed, we should be able to
       replace the following lists with some clever wildcards. -->
  <dependencySets>
    <!-- Mule libraries -->
    <dependencySet>
      <outputDirectory>lib/mule</outputDirectory>
      <scope>runtime</scope>
      <!--
            Don't put the SNAPSHOT wording in the examples.
            For some mysterious reason it makes our 2 CPU Opteron Linux box unhappy,
            and it fails at runtime. Oddly enough, the error exposes itself _only_ on
            this beafy Linux server (other less powerful Linux boxes are fine) as a
            MissingResourceBundle and _only_ for properties files, connector descriptors
            and similar resources. Dropping 'SNAPSHOT' from the jar name fixes it.
       -->
      <outputFileNameMapping>${artifactId}-1.3.${extension}</outputFileNameMapping>
      <includes>

        <!-- Core -->
        <include>org.mule:mule-core</include>
        <!-- Transports -->
        <include>org.mule.transports:mule-transport-axis</include>
        <include>org.mule.transports:mule-transport-dq</include>
        <include>org.mule.transports:mule-transport-ejb</include>
        <include>org.mule.transports:mule-transport-email</include>
        <include>org.mule.transports:mule-transport-file</include>
        <include>org.mule.transports:mule-transport-ftp</include>
        <include>org.mule.transports:mule-transport-gigaspaces</include>
        <include>org.mule.transports:mule-transport-glue</include>
        <include>org.mule.transports:mule-transport-http</include>
        <include>org.mule.transports:mule-transport-jbi</include>
        <include>org.mule.transports:mule-transport-jdbc</include>
        <include>org.mule.transports:mule-transport-jms</include>
        <include>org.mule.transports:mule-transport-multicast</include>
        <include>org.mule.transports:mule-transport-oracle-jms</include>
        <include>org.mule.transports:mule-transport-quartz</include>
        <include>org.mule.transports:mule-transport-rmi</include>
        <include>org.mule.transports:mule-transport-soap</include>
        <include>org.mule.transports:mule-transport-space</include>
        <include>org.mule.transports:mule-transport-ssl</include>
        <include>org.mule.transports:mule-transport-stream</include>
        <include>org.mule.transports:mule-transport-tcp</include>
        <include>org.mule.transports:mule-transport-udp</include>
        <include>org.mule.transports:mule-transport-vm</include>
        <include>org.mule.transports:mule-transport-xfire</include>
        <include>org.mule.transports:mule-transport-xmpp</include>
        <!-- Modules -->
        <include>org.mule.modules:mule-module-ognl</include>
        <include>org.mule.modules:mule-module-acegi</include>
        <include>org.mule.modules:mule-module-boot</include>
        <include>org.mule.modules:mule-module-client</include>
        <include>org.mule.modules:mule-module-hivemind</include>
        <include>org.mule.modules:mule-module-i18n</include>
        <include>org.mule.modules:mule-module-jaas</include>
        <include>org.mule.modules:mule-module-jotm</include>
        <include>org.mule.modules:mule-module-pgp</include>
        <include>org.mule.modules:mule-module-picocontainer</include>
        <include>org.mule.modules:mule-module-plexus</include>
        <include>org.mule.modules:mule-module-scripting</include>
        <include>org.mule.modules:mule-module-spring</include>
      </includes>
    </dependencySet>

    <!-- Non-Mule libraries -->
    <dependencySet>
      <outputDirectory>lib/opt</outputDirectory>
      <scope>runtime</scope>
      <excludes>
        <!-- Core -->
        <exclude>org.mule:mule-core</exclude>
        <!-- Transports -->
        <exclude>org.mule.transports:mule-transport-axis</exclude>
        <exclude>org.mule.transports:mule-transport-dq</exclude>
        <exclude>org.mule.transports:mule-transport-ejb</exclude>
        <exclude>org.mule.transports:mule-transport-email</exclude>
        <exclude>org.mule.transports:mule-transport-file</exclude>
        <exclude>org.mule.transports:mule-transport-ftp</exclude>
        <exclude>org.mule.transports:mule-transport-gigaspaces</exclude>
        <exclude>org.mule.transports:mule-transport-glue</exclude>
        <exclude>org.mule.transports:mule-transport-http</exclude>
        <exclude>org.mule.transports:mule-transport-jbi</exclude>
        <exclude>org.mule.transports:mule-transport-jdbc</exclude>
        <exclude>org.mule.transports:mule-transport-jms</exclude>
        <exclude>org.mule.transports:mule-transport-multicast</exclude>
        <exclude>org.mule.transports:mule-transport-oracle-jms</exclude>
        <exclude>org.mule.transports:mule-transport-quartz</exclude>
        <exclude>org.mule.transports:mule-transport-rmi</exclude>
        <exclude>org.mule.transports:mule-transport-soap</exclude>
        <exclude>org.mule.transports:mule-transport-space</exclude>
        <exclude>org.mule.transports:mule-transport-ssl</exclude>
        <exclude>org.mule.transports:mule-transport-stream</exclude>
        <exclude>org.mule.transports:mule-transport-tcp</exclude>
        <exclude>org.mule.transports:mule-transport-udp</exclude>
        <exclude>org.mule.transports:mule-transport-vm</exclude>
        <exclude>org.mule.transports:mule-transport-xfire</exclude>
        <exclude>org.mule.transports:mule-transport-xmpp</exclude>
        <!-- Modules -->
        <exclude>org.mule.modules:mule-module-ognl</exclude>
        <exclude>org.mule.modules:mule-module-boot</exclude>
        <exclude>org.mule.modules:mule-module-acegi</exclude>
        <exclude>org.mule.modules:mule-module-client</exclude>
        <exclude>org.mule.modules:mule-module-hivemind</exclude>
        <exclude>org.mule.modules:mule-module-i18n</exclude>
        <exclude>org.mule.modules:mule-module-jaas</exclude>
        <exclude>org.mule.modules:mule-module-jotm</exclude>
        <exclude>org.mule.modules:mule-module-pgp</exclude>
        <exclude>org.mule.modules:mule-module-picocontainer</exclude>
        <exclude>org.mule.modules:mule-module-plexus</exclude>
        <exclude>org.mule.modules:mule-module-scripting</exclude>
        <exclude>org.mule.modules:mule-module-spring</exclude>
        <!-- Examples -->
        <exclude>org.mule.examples:mule-example-echo</exclude>
        <exclude>org.mule.examples:mule-example-errorhandler</exclude>
        <exclude>org.mule.examples:mule-example-hello</exclude>
        <exclude>org.mule.examples:mule-example-loanbroker</exclude>
        <exclude>org.mule.examples:mule-example-loanbroker-esb</exclude>
        <exclude>org.mule.examples:mule-example-loanbroker-esb-credit-agency</exclude>
        <exclude>org.mule.examples:mule-example-scripting</exclude>
        <exclude>org.mule.examples:mule-example-stockquote</exclude>
        <exclude>org.mule.examples:mule-example-voipservice</exclude>
        <!-- Workaround, see comment for "<packaging>jar</packaging>" in the pom.xml -->
        <exclude>org.mule.distributions:mule-full</exclude>
      </excludes>
    </dependencySet>

    <!-- Mule examples -->
    <dependencySet>
      <outputDirectory>lib/user</outputDirectory>
      <scope>runtime</scope>
      <!-- Don't put the version number in the examples.  -->
      <outputFileNameMapping>${artifactId}.${extension}</outputFileNameMapping>
      <includes>
        <include>org.mule.examples:mule-example-echo</include>
        <include>org.mule.examples:mule-example-errorhandler</include>
        <!--<include>org.mule.examples:mule-example-hello</include>-->
        <include>org.mule.examples:mule-example-loanbroker</include>
        <include>org.mule.examples:mule-example-loanbroker-esb</include>
        <include>org.mule.examples:mule-example-loanbroker-esb-credit-agency</include>
        <include>org.mule.examples:mule-example-scripting</include>
        <include>org.mule.examples:mule-example-stockquote</include>
        <include>org.mule.examples:mule-example-voipservice</include>
      </includes>
    </dependencySet>
  </dependencySets>
</assembly>

<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:mule="http://www.mulesource.org/schema/mule/core/2.0"
       xmlns:rmi="http://www.mulesource.org/schema/mule/rmi/2.0"
       xmlns:vm="http://www.mulesource.org/schema/mule/vm/2.0"
       xsi:schemaLocation="
               http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
               http://www.mulesource.org/schema/mule/core/2.0 META-INF/mule.xsd
               http://www.mulesource.org/schema/mule/vm/2.0 META-INF/mule-vm.xsd
               http://www.mulesource.org/schema/mule/rmi/2.0 META-INF/mule-rmi.xsd">

    <rmi:connector name="rmi"


    <connector name="rmi" className="org.mule.providers.rmi.RmiConnector">
        <properties>
            <property name="jndiInitialContextFactory" value="org.mule.impl.jndi.MuleInitialContextFactory"/>
            <factory-property name="jndiContext" factory="org.mule.providers.rmi.MuleRMIFactory"/>
            <property name="securityPolicy" value="rmi.policy"/>
        </properties>
    </connector>

    <connector name="vmQueue" className="org.mule.providers.vm.VMConnector">
        <properties>
            <property name="queueEvents" value="true"/>
        </properties>
    </connector>

    <endpoint-identifiers>
        <endpoint-identifier name="Sender" value="rmi://localhost:1099/SimpleMathsUMO?method=addTen" />
        <endpoint-identifier name="Sender2" value="rmi://localhost:1099/MatchingUMO?method=reverseString" />
    </endpoint-identifiers>

     <model name="sample">
        <mule-descriptor name="TestUMO" implementation="org.mule.components.simple.BridgeComponent">
            <inbound-router>
                <endpoint address="vm://testin"/>
            </inbound-router>
            <outbound-router>
                <router className="org.mule.routing.outbound.FilteringOutboundRouter">
                    <endpoint address="Sender"/>
                    <filter expectedType="java.lang.Integer" className="org.mule.routing.filters.PayloadTypeFilter"/>
                </router>
                <router className="org.mule.routing.outbound.FilteringOutboundRouter">
                    <endpoint address="Sender2"/>
                    <filter expectedType="java.lang.String" className="org.mule.routing.filters.PayloadTypeFilter"/>
                </router>
            </outbound-router>
        </mule-descriptor>
    </model>
</mule-configuration> 